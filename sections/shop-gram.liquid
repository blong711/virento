{% style %}
  .section-{{ section.id }}-padding {
    padding-top: calc({{ section.settings.padding_top }}px * {{ section.settings.padding_mobile_rate | divided_by: 100.0 }});
    padding-bottom: calc({{ section.settings.padding_bottom }}px * {{ section.settings.padding_mobile_rate | divided_by: 100.0 }});
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{% endstyle %}

<section class="flat-spacing-8 pt-0 section-{{ section.id }}-padding color-{{ section.settings.color_scheme }}">
  <div class="{% if section.settings.width == 'boxed' %}container{% else %}container-full{% endif %}">
    {% if section.settings.heading != blank %}
      <div class="flat-title wow fadeInUp text-{{ section.settings.content_align }}" style="margin-bottom: {{ section.settings.heading_spacing }}px;">
        {% case section.settings.heading_size %}
          {% when 'small' %}
            <h5 class="title fw-semibold letter-0 {{ section.settings.heading_font }}">{{ section.settings.heading }}</h5>
          {% when 'large' %}
            <h3 class="title fw-semibold letter-0 {{ section.settings.heading_font }}">{{ section.settings.heading }}</h3>
          {% else %}
            <h4 class="title fw-semibold letter-0 {{ section.settings.heading_font }}">{{ section.settings.heading }}</h4>
        {% endcase %}
      </div>
    {% endif %}

    <div
      dir="ltr"
      class="swiper tf-swiper"
      data-swiper='
        {
          "slidesPerView": {{ section.settings.items_mobile }},
          "spaceBetween": {{ section.settings.space_between_mobile }},
          "speed": 800,
          "observer": true,
          "observeParents": true,
          "slidesPerGroup": {{ section.settings.items_mobile }},
          "navigation": { "enabled": false },
          {% if section.settings.use_dots_mobile %}
          "pagination": { "el": ".sw-pagination-shopgram", "clickable": true },
          {% endif %}
          "breakpoints": {
            "575": {
              "slidesPerView": {{ section.settings.items_mobile }},
              "spaceBetween": {{ section.settings.space_between_mobile }},
              "slidesPerGroup": {{ section.settings.items_mobile }}
            },
            "768": {
              "slidesPerView": {{ section.settings.items_tablet }},
              "spaceBetween": {{ section.settings.space_between_tablet }},
              "slidesPerGroup": {{ section.settings.items_tablet }}
            },
            "1200": {
              "slidesPerView": {{ section.settings.items_desktop }},
              "spaceBetween": {{ section.settings.space_between_desktop }},
              "slidesPerGroup": {{ section.settings.items_desktop }}
            }
          }
        }
      '
    >
      <div class="swiper-wrapper wow fadeInUp">
        {%- for block in section.blocks -%}
          {% if block.type == 'gram_item' %}
            <div class="swiper-slide" {{ block.shopify_attributes }}>
              <div class="gallery-item hover-img hover-overlay">
                <a {% if block.settings.link != blank %}href="{{ block.settings.link }}"{% endif %} class="image img-style d-block">
                  {% if block.settings.image != blank %}
                    {{ block.settings.image | image_url: width: 800 | image_tag: loading: 'lazy', sizes: '(min-width: 1200px) calc((100vw - 48px) / 5), (min-width: 768px) calc((100vw - 24px) / 3), calc((100vw - 10px) / 2)', class: 'w-100 h-auto' }}
                  {% else %}
                    {{ 'image' | placeholder_svg_tag }}
                  {% endif %}
                </a>
                {% if block.settings.link != blank %}
                  <a href="{{ block.settings.link }}" class="box-icon hover-tooltip">
                    <span class="icon icon-cart2"></span>
                    <span class="tooltip">{{ block.settings.tooltip | default: 'View Product' }}</span>
                  </a>
                {% endif %}
              </div>
            </div>
          {% endif %}
        {%- endfor -%}
      </div>
      {% if section.settings.use_dots_mobile %}
        <div class="d-flex d-xl-none sw-dot-default sw-pagination-shopgram justify-content-center"></div>
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Shop Gram",
  "settings": [
    {
      "type": "select",
      "id": "width",
      "label": "Section width",
      "options": [
        { "value": "boxed", "label": "Boxed" },
        { "value": "full", "label": "Full width" }
      ],
      "default": "boxed"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "background-1"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Shop by @Vineta"
    },
    {
      "type": "select",
      "id": "heading_size",
      "label": "Heading size",
      "options": [
        { "value": "small", "label": "Small" },
        { "value": "medium", "label": "Medium" },
        { "value": "large", "label": "Large" }
      ],
      "default": "medium"
    },
    {
      "type": "select",
      "id": "heading_font",
      "label": "Heading font",
      "options": [
        { "value": "", "label": "Default" },
        { "value": "font-main", "label": "Poppins" },
        { "value": "font-2", "label": "Albert Sans" },
        { "value": "font-3", "label": "Playfair Display" },
        { "value": "font-4", "label": "DM Sans" },
        { "value": "font-5", "label": "Baloo" },
        { "value": "font-6", "label": "Be Vietnam Pro" },
        { "value": "font-7", "label": "Oswald" },
        { "value": "font-8", "label": "Grandstander" },
        { "value": "font-9", "label": "Jost" },
        { "value": "font-10", "label": "Agbalumo" },
        { "value": "font-11", "label": "Manrope" },
        { "value": "font-12", "label": "Open Sans" },
        { "value": "font-13", "label": "Inter" },
        { "value": "font-14", "label": "Gloock" }
      ],
      "default": ""
    },
    {
      "type": "select",
      "id": "content_align",
      "label": "Heading alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" },
        { "value": "right", "label": "Right" }
      ],
      "default": "left"
    },
    {
      "type": "range",
      "id": "heading_spacing",
      "label": "Heading bottom spacing",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "default": 16
    },
    {
      "type": "header",
      "content": "Slider settings"
    },
    {
      "type": "checkbox",
      "id": "use_dots_mobile",
      "label": "Show dots on mobile",
      "default": true
    },
    {
      "type": "select",
      "id": "items_desktop",
      "label": "Items per view (desktop)",
      "options": [
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" },
        { "value": "5", "label": "5" }
      ],
      "default": "5"
    },
    {
      "type": "select",
      "id": "items_tablet",
      "label": "Items per view (tablet)",
      "options": [
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" }
      ],
      "default": "3"
    },
    {
      "type": "select",
      "id": "items_mobile",
      "label": "Items per view (mobile)",
      "options": [
        { "value": "1", "label": "1" },
        { "value": "2", "label": "2" }
      ],
      "default": "2"
    },
    {
      "type": "range",
      "id": "space_between_desktop",
      "min": 0,
      "max": 50,
      "step": 1,
      "label": "Space between (desktop)",
      "default": 10
    },
    {
      "type": "range",
      "id": "space_between_tablet",
      "min": 0,
      "max": 30,
      "step": 1,
      "label": "Space between (tablet)",
      "default": 10
    },
    {
      "type": "range",
      "id": "space_between_mobile",
      "min": 0,
      "max": 20,
      "step": 1,
      "label": "Space between (mobile)",
      "default": 10
    },
    {
      "type": "header",
      "content": "Section padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 120,
      "step": 5,
      "unit": "px",
      "label": "Padding top",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 120,
      "step": 5,
      "unit": "px",
      "label": "Padding bottom",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding_mobile_rate",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Mobile padding rate",
      "default": 75
    }
  ],
  "blocks": [
    {
      "type": "gram_item",
      "name": "Item",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "url", "id": "link", "label": "Link" },
        { "type": "text", "id": "tooltip", "label": "Tooltip", "default": "View Product" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Shop Gram",
      "category": "Image"
    }
  ]
}
{% endschema %}


