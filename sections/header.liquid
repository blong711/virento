{% liquid
  assign show_categories = section.settings.show_categories
  assign categories_style = ''
  assign layout_type = section.settings.layout_type
  
  if layout_type == 'layout_1'
    assign header_classes = 'header-default header-search'
    assign show_header_top = true
    assign show_header_bottom = true
  elsif layout_type == 'layout_2'
    assign header_classes = 'header-default'
    assign show_header_top = false
    assign show_header_bottom = false
  endif
%}

{% if layout_type == 'layout_2' %}
  {% render 'header-layout-2', section: section %}
{% else %}
<header
  id="header"
  class="{{ header_classes }} color-{{ section.settings.color_scheme }}"
  data-sticky-type="{{ section.settings.sticky_header }}"
>
  <!-- Predictive Search Settings -->
  <meta name="predictive-search-enabled" content="{{ settings.predictive_search_enabled }}">
  <meta name="predictive-search-show-price" content="{{ settings.predictive_search_show_price }}">
  {% if show_header_top %}
  <!-- Header Top -->
  <div class="header-top line-bt">
    <div class="container">
      <div class="row wrapper-header align-items-center">
        <!-- Mobile Menu Button -->
        <div class="col-md-4 col-3 d-xl-none">
          <a
            href="#mobileMenu"
            class="mobile-menu"
            data-bs-toggle="offcanvas"
            aria-controls="mobileMenu"
            aria-label="Open mobile menu"
          >
            <i class="icon icon-categories1" aria-hidden="true"></i>
          </a>
        </div>

        <!-- Logo -->
        <div class="col-xl-3 col-md-4 col-6">
          <a href="{{ routes.root_url }}" class="logo-header">
            {% if settings.logo != blank %}
              {% assign logo_width = settings.logo_width %}
              {{
                settings.logo
                | image_url: width: logo_width
                | image_tag:
                  class: 'logo',
                  width: logo_width,
                  alt: shop.name,
                  loading: 'eager',
                  fetchpriority: 'high',
                  decoding: 'sync'
              }}
            {% else %}
              <span class="h2">{{ shop.name }}</span>
            {% endif %}
          </a>
        </div>

        <!-- Search Form -->
        {% if section.settings.show_search %}
          <div class="col-xl-5 d-none d-xl-block text-center">
            <div class="tf-form-search">
              <form class="form-search" action="{{ routes.search_url }}" method="get">
                <input type="hidden" name="type" value="product">
                <input
                  type="text"
                  name="q"
                  value="{{ search.terms | escape }}"
                  placeholder="{{ section.settings.search_placeholder }}"
                  tabindex="0"
                  aria-required="true"
                  required
                >
                <button type="submit" class="btn-search" aria-label="Search">
                  <i class="icon icon-search" aria-hidden="true"></i>
                </button>
              </form>
              <!-- Search Suggestions -->
              {% if settings.suggestion_products != blank %}
                <div class="search-suggests-results">
                  <div class="search-suggests-results-inner">
                    <ul>
                      {% for suggestion_product in settings.suggestion_products limit: 5 %}
                        {% if suggestion_product and suggestion_product.available %}
                          <li>
                            <a class="search-result-item" href="{{ suggestion_product.url }}">
                              <div class="img-box">
                                {% if suggestion_product.featured_image %}
                                  <img
                                    class="lazyload"
                                    data-src="{{ suggestion_product.featured_image | image_url: width: 60 }}"
                                    src="{{ suggestion_product.featured_image | image_url: width: 60 }}"
                                    alt="{{ suggestion_product.title }}"
                                    width="60"
                                    height="60"
                                  >
                                {% endif %}
                              </div>
                              <div class="box-content">
                                <p class="title link">{{ suggestion_product.title }}</p>
                                <div class="price">
                                  {% if suggestion_product.compare_at_price > suggestion_product.price %}
                                    <span class="new-price">{{ suggestion_product.price | money }}</span>
                                    <span class="old-price old-line">
                                      {{- suggestion_product.compare_at_price | money -}}
                                    </span>
                                  {% else %}
                                    <span class="new-price">{{ suggestion_product.price | money }}</span>
                                  {% endif %}
                                </div>
                              </div>
                            </a>
                          </li>
                        {% endif %}
                      {% endfor %}
                    </ul>
                  </div>
                </div>
              {% endif %}
            </div>
          </div>
        {% endif %}

        <!-- Header Icons -->
        <div class="col-xl-4 col-md-4 col-3">
          <ul class="nav-icon d-flex justify-content-end align-items-center">
            {% if section.settings.show_account %}
              <li class="nav-account">
                {% if customer %}
                  <a href="{{ routes.account_url }}" class="nav-icon-item" aria-label="Account">
                    <i class="icon icon-user" aria-hidden="true"></i>
                    <span class="text d-none d-xl-block">{{ 'customer.account.title' | t }}</span>
                  </a>
                {% else %}
                  <a href="#login" class="nav-icon-item" data-bs-toggle="offcanvas" aria-label="Login">
                    <i class="icon icon-user" aria-hidden="true"></i>
                    <span class="text d-none d-xl-block">{{ 'customer.login.title' | t }}</span>
                  </a>
                {% endif %}
              </li>
            {% endif %}

            {% if section.settings.show_wishlist %}
              <li class="nav-wishlist">
                <a href="{{ routes.search_url }}/?view=wishlist" class="nav-icon-item" aria-label="Wishlist">
                  <i class="icon icon-heart" aria-hidden="true"></i>
                  <span class="text d-none d-xl-block">{{ 'general.wishlist.title' | t }}</span>
                </a>
              </li>
            {% endif %}

            {% if section.settings.show_cart %}
              <li class="nav-cart">
                <a href="#shoppingCart" class="nav-icon-item" data-bs-toggle="offcanvas" aria-label="Shopping cart">
                  <i class="icon icon-cart" aria-hidden="true"></i>
                  <span class="text d-none d-xl-block">{{ 'general.cart.title' | t }}</span>
                </a>
              </li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>
  </div>
  {% endif %}

  {% if show_header_bottom %}
  <!-- Header Bottom Navigation -->
  {% render 'header-bottom-layout-1', section: section %}
  {% endif %}
</header>
{% endif %}

{%- style %}
  /* Layout 1 Styles */
  .wrapper-header-bottom .call-us {
    color: rgb(var(--color-foreground2)) !important;
    border-bottom: 1px solid rgb(var(--color-foreground2)) !important;
  }

  .header-default .box-nav-menu .item-link,
  .header-default .box-phone .icon,
  .header-style-2 .box-phone a,
  .nav-account a,
  .nav-wishlist a,
  .nav-cart a {
    color: rgb(var(--color-foreground)) !important;
  }

  .header-default .nav-icon .nav-icon-item:hover {
    color: rgb(var(--color-text-hover)) !important;
  }

  .header-default .box-nav-menu .menu-item:hover .item-link {
    color: rgb(var(--color-text-hover)) !important;
  }

  .wrapper-header-bottom .tf-mega-categories .categories-title,
  .header-default .box-phone .box-icon {
    background-color: rgba(var(--color-background2)) !important;
  }

  /* Search Suggestions Enhancements */
  .tf-form-search .search-suggests-results-inner .search-result-item {
    transition: background-color 0.2s ease;
    border-radius: 8px;
    padding: 8px;
    margin: 0 -8px;
  }

  .tf-form-search .search-suggests-results-inner .search-result-item:hover {
    background-color: rgba(var(--color-primary), 0.05);
  }

  .tf-form-search .search-suggests-results-inner .search-result-item .title {
    font-size: 14px;
    line-height: 1.4;
    margin-bottom: 4px;
  }

  .tf-form-search .search-suggests-results-inner .search-result-item .img-box {
    flex-shrink: 0;
    border-radius: 6px;
    overflow: hidden;
  }

  .tf-form-search .search-suggests-results-inner .search-result-item .img-box img {
    object-fit: cover;
    height: 60px;
  }
{%- endstyle %}

{% schema %}
{
  "name": "t:sections.header.name",
  "tag": "header",
  "class": "section-header",
  "settings": [
    {
      "type": "header",
      "content": "t:sections.header.settings.layout_configuration.content"
    },
    {
      "type": "select",
      "id": "layout_type",
      "label": "t:sections.header.settings.layout.label",
      "options": [
        { "value": "layout_1", "label": "t:sections.header.settings.layout_1" },
        { "value": "layout_2", "label": "t:sections.header.settings.layout_2" }
      ],
      "default": "layout_1"
    },
    {
      "type": "select",
      "id": "sticky_header",
      "label": "t:sections.header.settings.sticky_header.label",
      "options": [
        {
          "value": "none",
          "label": "t:sections.header.settings.sticky_header.options.none"
        },
        {
          "value": "on_scroll_up",
          "label": "t:sections.header.settings.sticky_header.options.on_scroll_up"
        }
      ],
      "default": "on_scroll_up"
    },
    {
      "type": "range",
      "id": "menu_item_spacing",
      "label": "t:sections.header.settings.menu_spacing.label",
      "info": "t:sections.header.settings.menu_spacing.info",
      "unit": "px",
      "min": 0,
      "max": 48,
      "step": 2,
      "default": 16
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:sections.all.colors.label",
      "default": "scheme-9"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.navigation.content"
    },
    {
      "type": "link_list",
      "id": "main_menu",
      "label": "t:sections.header.settings.menu.label"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.search.content"
    },
    {
      "type": "checkbox",
      "id": "show_search",
      "label": "t:sections.header.settings.show_search.label",
      "default": true
    },
    {
      "type": "text",
      "id": "search_placeholder",
      "label": "t:sections.header.settings.search_placeholder.label",
      "default": "t:sections.header.settings.search_placeholder.default",
      "visible_if": "{{ section.settings.layout_type == 'layout_1' }}"
    },
    {
      "type": "header",
      "content": "t:sections.header.settings.utility_settings.content"
    },
    {
      "type": "checkbox",
      "id": "show_account",
      "label": "t:sections.header.settings.show_account.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_wishlist",
      "label": "t:sections.header.settings.show_wishlist.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_cart",
      "label": "t:sections.header.settings.show_cart.label",
      "default": true
    }
  ],
  "blocks": [
    {
      "type": "mega_home",
      "name": "t:sections.header.blocks.mega_home.name",
      "settings": [
        {
          "type": "text",
          "id": "menu_item_match",
          "label": "t:sections.header.blocks.mega_home.settings.menu_item_match.label",
          "info": "t:sections.header.blocks.mega_home.settings.menu_item_match.info"
        },
        {
          "type": "page",
          "id": "content_page",
          "label": "t:sections.header.blocks.mega_home.settings.content_page.label",
          "info": "t:sections.header.blocks.mega_home.settings.content_page.info"
        }
      ]
    },
    {
      "type": "mega_shop",
      "name": "t:sections.header.blocks.mega_shop.name",
      "settings": [
        {
          "type": "text",
          "id": "menu_item_match",
          "label": "t:sections.header.blocks.mega_shop.settings.menu_item_match.label",
          "info": "t:sections.header.blocks.mega_shop.settings.menu_item_match.info"
        },
        {
          "type": "collection_list",
          "id": "collections",
          "label": "t:sections.header.blocks.mega_shop.settings.collections.label",
          "limit": 8,
          "info": "t:sections.header.blocks.mega_shop.settings.collections.info"
        }
      ]
    },
    {
      "type": "mega_product",
      "name": "t:sections.header.blocks.mega_product.name",
      "settings": [
        {
          "type": "text",
          "id": "menu_item_match",
          "label": "t:sections.header.blocks.mega_product.settings.menu_item_match.label",
          "info": "t:sections.header.blocks.mega_product.settings.menu_item_match.info"
        },
        {
          "type": "product_list",
          "id": "products",
          "label": "t:sections.header.blocks.mega_product.settings.products.label",
          "limit": 4,
          "info": "t:sections.header.blocks.mega_product.settings.products.info"
        }
      ]
    },
    {
      "type": "mega_pages",
      "name": "t:sections.header.blocks.mega_pages.name",
      "settings": [
        {
          "type": "text",
          "id": "menu_item_match",
          "label": "t:sections.header.blocks.mega_pages.settings.menu_item_match.label",
          "info": "t:sections.header.blocks.mega_pages.settings.menu_item_match.info"
        },
        {
          "type": "image_picker",
          "id": "banner_image",
          "label": "t:sections.header.blocks.mega_pages.settings.banner_image.label"
        },
        {
          "type": "text",
          "id": "banner_title",
          "label": "t:sections.header.blocks.mega_pages.settings.banner_title.label",
          "default": "t:sections.header.blocks.mega_pages.settings.banner_title.default"
        },
        {
          "type": "url",
          "id": "banner_url",
          "label": "t:sections.header.blocks.mega_pages.settings.banner_url.label"
        }
      ]
    },
    {
      "type": "mega_blog",
      "name": "t:sections.header.blocks.mega_blog.name",
      "settings": [
        {
          "type": "text",
          "id": "menu_item_match",
          "label": "t:sections.header.blocks.mega_blog.settings.menu_item_match.label",
          "info": "t:sections.header.blocks.mega_blog.settings.menu_item_match.info"
        },
        {
          "type": "header",
          "content": "t:sections.header.blocks.mega_blog.settings.recent_posts.content"
        },
        {
          "type": "text",
          "id": "recent_posts_title",
          "label": "t:sections.header.blocks.mega_blog.settings.recent_posts_title.label",
          "default": "t:sections.header.blocks.mega_blog.settings.recent_posts_title.default"
        },
        {
          "type": "blog",
          "id": "blog",
          "label": "t:sections.header.blocks.mega_blog.settings.blog.label",
          "info": "t:sections.header.blocks.mega_blog.settings.blog.info"
        },
        {
          "type": "range",
          "id": "posts_to_show",
          "label": "t:sections.header.blocks.mega_blog.settings.posts_to_show.label",
          "min": 3,
          "max": 6,
          "step": 1,
          "default": 3
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.header.presets.name",
      "category": "t:sections.header.presets.category",
      "settings": {
        "layout_type": "layout_1",
        "color_scheme": "scheme-731d8c26-e8bd-4d5b-b15f-96ab5ec0e52b",
        "show_search": true,
        "show_account": true,
        "show_wishlist": true,
        "show_cart": true
      }
    }
  ]
}
{% endschema %}
